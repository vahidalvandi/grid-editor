!function(K){K.fn.gridEditor=function(z){var e,t=this,n=t.data("grideditor");return"getHtml"==z?n?(n.deinit(),e=t.html(),n.init(),e):t.html():"remove"!=z?(t.each(function(e,t){t=K(t);var a,n,o,i,s,c,l,r,d,f,u=K.extend({new_row_layouts:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],row_classes:[{label:"Example class",cssClass:"example-class"}],col_classes:[{label:"Example class",cssClass:"example-class"}],col_tools:[],row_tools:[],custom_filter:"",content_types:["tinymce"],valid_col_sizes:[1,2,3,4,5,6,7,8,9,10,11,12],source_textarea:""},z),h=["col-lg-","col-sm-","col-"],m=0,g=12;function p(e){var t=K(window);t.scrollTop()>n.offset().top&&t.scrollTop()<a.offset().top+a.height()?o.hasClass("ge-top")&&o.css({left:o.offset().left,width:o.outerWidth()}).removeClass("ge-top").addClass("ge-fixed"):o.hasClass("ge-fixed")&&o.css({left:"",width:""}).removeClass("ge-fixed").addClass("ge-top")}function v(e){var t=D(K(this).data("ge-content-type"));t&&(K(this).addClass("ge-rte-active",!0),t.init(u,K(this)))}function w(){function e(e,t){t.placeholder.css({height:t.item.outerHeight()})}M(!0),a.addClass("ge-editing"),a.find('.column, div[class*="col-"]').each(function(){var t=K(this),n=2,e=k(t),o=(e.length&&(n=e[0].size),t.attr("class"));h.forEach(function(e){-1==o.indexOf(e)&&t.addClass(e+n)}),t.addClass("column")}),a.find(".column").each(function(){var e=K(this),t=K();e.children().each(function(){var e=K(this);e.is(".row, .ge-tools-drawer, .ge-content")?j(t):t=t.add(e)}),j(t)}),a.find(".row").each(function(){var t,e,n=K(this);n.find("> .ge-tools-drawer").length||(C(t=K('<div class="ge-tools-drawer" />').prependTo(n),"Move","ge-move","fa fa-arrows-alt"),C(t,"Settings","","fa fa-cog",function(){e.toggle()}),u.row_tools.forEach(function(e){C(t,e.title||"",e.className||"",e.iconClass||"fa fa-wrench",e.on)}),C(t,"Remove row","","fa fa-trash-alt",function(){window.confirm("Delete row?")&&n.slideUp(function(){n.remove()})}),C(t,"Add column","ge-add-column","fa fa-plus-circle",function(){n.append(x(3)),w()}),e=b(n,u.row_classes).appendTo(t))}),a.find(".column").each(function(){var t,e,a=K(this);a.find("> .ge-tools-drawer").length||(C(t=K('<div class="ge-tools-drawer" />').prependTo(a),"Move","ge-move","fa fa-arrows-alt"),C(t,"Make column narrower\n(hold shift for min)","ge-decrease-col-width","fa fa-minus",function(e){var t=u.valid_col_sizes,n=h[m],o=t.indexOf(T(a,n)),o=t[I(o-1,0,t.length-1)];e.shiftKey&&(o=t[0]),E(a,n,Math.max(o,1))}),C(t,"Make column wider\n(hold shift for max)","ge-increase-col-width","fa fa-plus",function(e){var t=u.valid_col_sizes,n=h[m],o=t.indexOf(T(a,n)),o=t[I(o+1,0,t.length-1)];e.shiftKey&&(o=T(a)+(t=a.parent(),g-function(e){var t=h[m],n=0;return e.find('> [class*="'+t+'"]').each(function(){n+=T(K(this))}),n}(t))),E(a,n,Math.min(o,g))}),C(t,"Settings","","fa fa-cog",function(){e.toggle()}),u.col_tools.forEach(function(e){C(t,e.title||"",e.className||"",e.iconClass||"fa fa-wrench",e.on)}),C(t,"Remove col","","fa fa-trash-alt",function(){window.confirm("Delete column?")&&a.animate({opacity:"hide",width:"hide",height:"hide"},400,function(){a.remove()})}),C(t,"Add row","ge-add-row","fa fa-plus-circle",function(){var e=_();a.append(e),e.append(x(6)).append(x(6)),w()}),e=b(a,u.col_classes).appendTo(t))}),a.find(".row").sortable({items:"> .column",connectWith:".ge-canvas .row",handle:"> .ge-tools-drawer .ge-move",start:e,tolerance:"pointer",helper:"clone"}),a.add(a.find(".column")).sortable({items:"> .row, > .ge-content",connectsWith:".ge-canvas, .ge-canvas .column",handle:"> .ge-tools-drawer .ge-move",start:e,helper:"clone"}),A(m)}function y(){a.removeClass("ge-editing");a.find(".ge-content").removeClass("ge-rte-active").each(function(){var e=K(this);D(e.data("ge-content-type")).deinit(u,e)});a.find(".ge-tools-drawer").remove(),a.add(a.find(".column")).add(a.find(".row")).sortable("destroy"),M(!1)}function C(e,t,n,o,a){var i=K('<a title="'+t+'" class="'+n+'"><i class="'+o+'"></i></a>').appendTo(e);"function"==typeof a&&i.on("click",a),"object"==typeof a&&K.each(a,function(e,t){i.on(e,t)})}function b(n,e){var t=K('<div class="ge-details" />'),o=(K('<input class="ge-id" />').attr("placeholder","id").val(n.attr("id")).attr("title","Set a unique identifier").appendTo(t).change(function(){n.attr("id",this.value)}),K('<div class="btn-group" />').appendTo(t));return e.forEach(function(e){var t=K('<a class="btn btn-sm btn-default" />').html(e.label).attr("title",e.title||'Toggle "'+e.label+'" styling').toggleClass("active btn-primary",n.hasClass(e.cssClass)).on("click",function(){t.toggleClass("active btn-primary"),n.toggleClass(e.cssClass,t.hasClass("active"))}).appendTo(o)}),t}function T(e,t){for(var n=k(e),o=0;o<n.length;o++)if(n[o].colClass==t)return n[o].size;return n.length?n[0].size:null}function k(n){var o=[];return h.forEach(function(e){var t=new RegExp(e+"(\\d+)","i");t.test(n.attr("class"))&&o.push({colClass:e,size:parseInt(t.exec(n.attr("class"))[1])})}),o}function E(e,t,n){var o=new RegExp("("+t+"(\\d+))","i").exec(e.attr("class"));o&&parseInt(o[2])!==n?e.switchClass(o[1],t+n,50):e.addClass(t+n)}function _(){return K('<div class="row" />')}function x(t){return K("<div/>").addClass(h.map(function(e){return e+t}).join(" ")).append(R().html(D(u.content_types[0]).initialContent))}function M(n){u.custom_filter.length&&K.each(u.custom_filter,function(e,t){(t="string"==typeof t?window[t]:t)(a,n)})}function j(e){var t;e.length&&(t=R().insertAfter(e.last()),e.appendTo(t),K())}function R(){return K("<div/>").addClass("ge-content ge-content-type-"+u.content_types[0]).attr("data-ge-content-type",u.content_types[0])}function A(n){m=n;["ge-layout-desktop","ge-layout-tablet","ge-layout-phone"].forEach(function(e,t){a.toggleClass(e,t==n)})}function D(e){return K.fn.gridEditor.RTEs[e]}function I(e,t,n){return Math.min(n,Math.max(t,e))}u.source_textarea&&(0<(r=K(u.source_textarea).val()).length&&0==K("<div>"+r+"</div>").find(".row").addBack(".row").length&&(c=_(),(c=x(12).appendTo(c)).find(".ge-content").html(r),r=c.html()),t.html(r)),t.children().length&&!t.find("div.row").length&&(c=t.children(),K('<div class="row"><div class="col-lg-12"/></div>').appendTo(t).find(".col-lg-12").append(c)),a=t.addClass("ge-canvas"),s=K('<textarea class="ge-html-output"/>').insertBefore(a),n=K('<div class="ge-mainControls" />').insertBefore(s),o=K('<div class="ge-wrapper ge-top" />').appendTo(n),i=K('<div class="ge-addRowGroup btn-group" />').appendTo(o),K.each(u.new_row_layouts,function(e,n){var t=K('<a class="btn btn-sm btn-primary" />').attr("title","Add row "+n.join("-")).on("click",function(){var t=_().appendTo(a);n.forEach(function(e){x(e).appendTo(t)}),w(),t[0].scrollIntoView&&t[0].scrollIntoView({behavior:"smooth"})}).appendTo(i),o=(t.append('<i class="fa fa-plus"></i>'),n.join(" - "),'<div class="row ge-row-icon">');n.forEach(function(e){o+='<div class="column col-'+e+'"/>'}),o+="</div>",t.append(o)}),l=K('<div class="dropdown pull-right ge-layout-mode"><button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown">Desktop</button><div class="dropdown-menu" role="menu"><a class="dropdown-item" data-width="auto" title="Desktop">Desktop</a><a class="dropdown-item" title="Tablet">Tablet<a class="dropdown-item" title="Phone">Phone</a></div></div>').on("click","a",function(){var e=K(this);A(e.index()),l.find("button").text(e.text())}).appendTo(o),r=K('<div class="btn-group pull-right"/>').appendTo(o),d=K('<button title="Edit Source Code" type="button" class="btn btn-sm btn-primary gm-edit-mode"><i class="fa fa-chevron-left"></i><i class="fa fa-chevron-right"></i></span></button>').on("click",function(){d.hasClass("active")?(a.empty().html(s.val()).show(),w(),s.hide()):(y(),s.height(.8*K(window).height()).val(a.html()).show(),a.hide()),d.toggleClass("active btn-danger")}).appendTo(r),f=K('<button title="Preview" type="button" class="btn btn-sm btn-primary gm-preview"><i class="fa fa-eye"></i></button>').on("mouseenter",function(){a.removeClass("ge-editing")}).on("click",function(){f.toggleClass("active btn-danger").trigger("mouseleave")}).on("mouseleave",function(){f.hasClass("active")||a.addClass("ge-editing")}).appendTo(r),K(window).on("scroll",p),a.on("click",".ge-content",v),w(),t.data("grideditor",{init:w,deinit:y,remove:function(){y(),n.remove(),s.remove(),K(window).off("scroll",p),a.off("click",".ge-content",v),a.removeData("grideditor")}})}),t):void(n&&n.remove())},K.fn.gridEditor.RTEs={}}(jQuery),function(i){i.fn.gridEditor.RTEs.ckeditor={init:function(o,e){window.CKEDITOR||console.error("CKEditor not available! Make sure you loaded the ckeditor and jquery adapter js files.");var a=this;e.each(function(){var e,n,t=i(this);t.hasClass("active")||(t.html()==a.initialContent&&t.html("&nbsp;"),t.addClass("active").attr("contenteditable","true"),e=i.extend({},o.ckeditor&&o.ckeditor.config?o.ckeditor.config:{},{on:{instanceReady:function(e){var t;try{t=o.ckeditor.config.on.instanceReady}catch(e){}t&&t.call(this,e),n.focus()}}}),n=CKEDITOR.inline(t.get(0),e))})},deinit:function(e,t){t.filter(".active").each(function(){var e=i(this);i.each(CKEDITOR.instances,function(e,t){t.destroy()}),e.removeClass("active cke_focus").removeAttr("id").removeAttr("style").removeAttr("spellcheck").removeAttr("contenteditable")})},initialContent:"<p>Lorem initius... </p>"}}(jQuery),function(a){a.fn.gridEditor.RTEs.summernote={init:function(n,e){jQuery().summernote||console.error("Summernote not available! Make sure you loaded the Summernote js file.");var o=this;e.each(function(){var e,t=a(this);t.hasClass("active")||(t.html()==o.initialContent&&t.html(""),t.addClass("active"),e=a.extend(!0,{},n.summernote&&n.summernote.config?n.summernote.config:{},{tabsize:2,airMode:!0,callbacks:{onInit:function(){var e;try{e=n.summernote.config.callbacks.onInit}catch(e){}e&&e.call(this),t.summernote("focus")}}}),t.summernote(e))})},deinit:function(e,t){t.filter(".active").each(function(){var e=a(this);e.summernote("destroy"),e.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery),function(a){a.fn.gridEditor.RTEs.tinymce={init:function(n,e){window.tinymce||console.error("tinyMCE not available! Make sure you loaded the tinyMCE js file."),e.tinymce||console.error("tinyMCE jquery integration not available! Make sure you loaded the jquery integration plugin.");var o=this;e.each(function(){var e,t=a(this);t.hasClass("active")||(t.html()==o.initialContent&&t.html(""),t.addClass("active"),e=a.extend({},n.tinymce&&n.tinymce.config?n.tinymce.config:{},{inline:!0,oninit:function(e){var t;a("#"+e.settings.id).focus();try{t=n.tinymce.config.oninit}catch(e){}t&&t.call(this)}}),t.tinymce(e))})},deinit:function(e,t){t.filter(".active").each(function(){var e=a(this),t=e.tinymce();t&&t.remove(),e.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery);
//# sourceMappingURL=jquery.grideditor.min.js.map